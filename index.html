<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trust & Pi Guide | Ø«Ù‚Ø© ÙˆØ¯Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø§ÙŠ</title>
    <style>
        :root { --pi-purple: #6b38af; --pi-gold: #ffc107; --pi-bg: #f8f9fa; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--pi-bg); margin: 0; padding: 15px; color: #333; }
        .container { max-width: 500px; margin: auto; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .lang-btn { border: 1px solid #ddd; padding: 5px 10px; border-radius: 12px; background: white; cursor: pointer; font-size: 13px; font-weight: bold; }
        .brand { text-align: left; }
        .brand h1 { margin: 0; font-size: 20px; color: var(--pi-purple); }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
        .search-area { background: white; border-radius: 25px; padding: 10px 15px; display: flex; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .search-area input { border: none; outline: none; width: 100%; font-size: 16px; margin: 0 10px; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠØ© (Ø·Ø¨Ù‚ Ø§Ù„Ø£ØµÙ„ Ù…Ù† ØµÙˆØ±ØªÙƒ) */
        .nav-bar { display: flex; justify-content: space-between; margin-bottom: 25px; }
        .nav-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; flex: 1; }
        .circle { width: 50px; height: 50px; background: var(--pi-purple); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; margin-bottom: 5px; transition: 0.3s; box-shadow: 0 4px 8px rgba(107, 56, 175, 0.3); }
        .circle.grey { background: #b0b0b0; box-shadow: none; }
        .nav-item span { font-size: 11px; font-weight: bold; color: #666; }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .content-section { display: none; animation: fadeIn 0.4s; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªØ§Ø¬Ø± */
        .card { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.08); margin-bottom: 20px; position: relative; }
        .badge { position: absolute; top: 12px; right: 12px; background: var(--pi-gold); padding: 4px 12px; border-radius: 15px; font-size: 11px; font-weight: bold; }
        .card-img { width: 100%; height: 180px; background: #eee; object-fit: cover; }
        .card-body { padding: 15px; text-align: right; }
        [dir="ltr"] .card-body { text-align: left; }
        .main-btn { background: var(--pi-purple); color: white; border: none; width: 100%; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 10px; }

        /* Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ (Ø§Ù„Ø§Ø³ØªÙŠÙƒÙ†Ø¬ ÙˆØ¥Ø¶Ø§ÙØ© ØªØ§Ø¬Ø±) */
        .form-box { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); }
        .form-box input, .form-box select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div class="lang-selectors">
            <button class="lang-btn" onclick="setLanguage('en')">ğŸ‡ºğŸ‡¸ EN</button>
            <button class="lang-btn" onclick="setLanguage('ar')">ğŸ‡ªğŸ‡¬ AR</button>
        </div>
        <div class="brand">
            <h1 data-i18n="app_name">Ø«Ù‚Ø© ÙˆØ¯Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø§ÙŠ</h1>
            <p style="margin:0; font-size:10px; color:#888" data-i18n="tagline">Ø§Ù„Ù…Ø±Ø¬Ø¹ Ø§Ù„Ø£ÙˆÙ„ Ù„Ø±ÙˆØ§Ø¯ Pi Network</p>
        </div>
    </div>

    <div class="search-area">
        <span>ğŸ”</span>
        <input type="text" id="mainSearch" onkeyup="doSearch()" data-i18n-placeholder="search_hint" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ØªØ¬Ø§Ø±...">
    </div>

    <div class="nav-bar">
        <div class="nav-item" onclick="showPage('home')">
            <div class="circle">ğŸ </div>
            <span data-i18n="nav_home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>
        <div class="nav-item" onclick="showPage('add-merchant')">
            <div class="circle">â•</div>
            <span data-i18n="nav_add">Ø¥Ø¶Ø§ÙØ© ØªØ§Ø¬Ø±</span>
        </div>
        <div class="nav-item" onclick="showPage('staking')">
            <div class="circle">ğŸ”’</div>
            <span data-i18n="nav_staking">Ø§Ù„Ø§Ø³ØªÙŠÙƒÙ†Ø¬</span>
        </div>
        <div class="nav-item">
            <div class="circle grey">ğŸ“±</div>
            <span data-i18n="nav_apps">ØªØ·Ø¨ÙŠÙ‚Ø§Øª</span>
        </div>
    </div>

    <div id="home-page" class="content-section active">
        <h3 data-i18n="latest_title">Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚Ø©</h3>
        <div id="merchants-list"></div>
    </div>

    <div id="staking-page" class="content-section">
        <div class="form-box">
            <h2 data-i18n="staking_title">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø§Ø³ØªÙŠÙƒÙ†Ø¬</h2>
            <input type="number" id="piVal" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ…ÙŠØ© Ø¹Ù…Ù„Ø§ØªÙƒ">
            <select id="lockTime">
                <option value="0.25">6 Ø£Ø´Ù‡Ø± (25%)</option>
                <option value="1.0">Ø³Ù†Ø© (100%)</option>
                <option value="2.0">3 Ø³Ù†ÙˆØ§Øª (200%)</option>
            </select>
            <button class="main-btn" onclick="calcStaking()" data-i18n="calc_now">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</button>
            <div id="stakeResult" style="margin-top:20px; font-weight:bold; color:var(--pi-purple); text-align:center;"></div>
        </div>
    </div>

    <div id="add-merchant-page" class="content-section">
        <div class="form-box">
            <h2 data-i18n="add_title">Ø³Ø¬Ù„ ÙƒØªØ§Ø¬Ø± Ù…ÙˆØ«ÙˆÙ‚</h2>
            <input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±">
            <input type="text" placeholder="Ù†ÙˆØ¹ Ø§Ù„Ù†Ø´Ø§Ø·">
            <input type="text" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ØªØ¬Ø± Ø£Ùˆ Ø§Ù„Ù…ÙˆÙ‚Ø¹">
            <button class="main-btn" onclick="alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©!')" data-i18n="send_req">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
        </div>
    </div>
</div>

<script>
    // 1. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªØ±Ø¬Ù…Ø©
    const uiStrings = {
        ar: {
            app_name: "Ø«Ù‚Ø© ÙˆØ¯Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø§ÙŠ", tagline: "Ø¯Ù„ÙŠÙ„ Ù…ÙˆØ«ÙˆÙ‚ Ù„Ù…Ø¬ØªÙ…Ø¹ Pi",
            search_hint: "Ø§Ø¨Ø­Ø« Ø¹Ù† ØªØ§Ø¬Ø± Ø£Ùˆ Ù…Ø¯ÙŠÙ†Ø©...", nav_home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
            nav_add: "Ø¥Ø¶Ø§ÙØ©", nav_staking: "Ù‚ÙÙ„", nav_apps: "Ø£Ø¯ÙˆØ§Øª",
            latest_title: "Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚Ø©", staking_title: "Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†",
            calc_now: "Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¢Ù†", add_title: "ØªØ³Ø¬ÙŠÙ„ ØªØ§Ø¬Ø± Ø¬Ø¯ÙŠØ¯", send_req: "Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",
            dir: "rtl"
        },
        en: {
            app_name: "Trust & Pi Guide", tagline: "Verified Guide for Pioneers",
            search_hint: "Search for store or city...", nav_home: "Home",
            nav_add: "Add", nav_staking: "Stake", nav_apps: "Apps",
            latest_title: "Latest Verified Stores", staking_title: "Staking Calc",
            calc_now: "Calculate", add_title: "Register Merchant", send_req: "Send Request",
            dir: "ltr"
        }
    };

    let merchantsData = [];

    // 2. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙØ­Ø§Øª
    function showPage(pageId) {
        document.querySelectorAll('.content-section').forEach(p => p.classList.remove('active'));
        document.getElementById(pageId + '-page').classList.add('active');
    }

    // 3. ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºØ§Øª
    function setLanguage(lang) {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            el.innerText = uiStrings[lang][el.getAttribute('data-i18n')];
        });
        document.getElementById('mainSearch').placeholder = uiStrings[lang].search_hint;
        document.documentElement.dir = uiStrings[lang].dir;
        localStorage.setItem('lang', lang);
        renderMerchants(merchantsData);
    }

    // 4. Ø§Ù„Ø¨Ø­Ø« ÙˆØ¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    async function init() {
        try {
            const res = await fetch('merchants.json');
            merchantsData = await res.json();
            renderMerchants(merchantsData);
        } catch(e) { console.log("JSON empty or missing"); }
        
        const saved = localStorage.getItem('lang') || 'ar';
        setLanguage(saved);
    }

    function renderMerchants(data) {
        const list = document.getElementById('merchants-list');
        list.innerHTML = '';
        data.forEach(m => {
            list.innerHTML += `
                <div class="card">
                    <div class="badge">Ù…ÙˆØ«ÙˆÙ‚ âœ…</div>
                    <img src="https://via.placeholder.com/400x200?text=Pi+Store" class="card-img">
                    <div class="card-body">
                        <h3 style="margin:0; color:var(--pi-purple)">${m.name}</h3>
                        <p style="font-size:13px; color:#666">ğŸ“ ${m.location} | ğŸ“‚ ${m.category}</p>
                        <button class="main-btn" onclick="window.open('${m.link || '#'}')">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
                    </div>
                </div>
            `;
        });
    }

    function doSearch() {
        const query = document.getElementById('mainSearch').value.toLowerCase();
        const filtered = merchantsData.filter(m => 
            m.name.toLowerCase().includes(query) || m.location.toLowerCase().includes(query)
        );
        renderMerchants(filtered);
    }

    // 5. Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø§Ø³ØªÙŠÙƒÙ†Ø¬
    function calcStaking() {
        const val = document.getElementById('piVal').value;
        const multiplier = document.getElementById('lockTime').value;
        const result = (val * multiplier).toFixed(2);
        const msg = document.documentElement.dir === 'rtl' ? 'Ø§Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©: ' : 'Expected Boost: ';
        document.getElementById('stakeResult').innerText = msg + result + " Pi";
    }

    window.onload = init;
</script>

</body>
                                                                                                                 </html>
