<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø«Ù‚Ø© ÙˆØ¯Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø§ÙŠ - GCV</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main-purple: #673ab7; --bg-gray: #f8f9fa; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-gray); margin: 0; padding-bottom: 80px; }
        .header { background: white; padding: 15px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        .top-nav { display: flex; justify-content: space-around; padding: 10px; background: #eee; font-size: 14px; }
        .search-bar { padding: 15px; }
        .search-bar input { width: 100%; padding: 12px; border-radius: 25px; border: 1px solid #ddd; outline: none; }
        .merchant-card { background: white; margin: 15px; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .merchant-img { width: 100%; height: 200px; object-fit: cover; }
        .merchant-info { padding: 15px; text-align: right; }
        .badge { background: #ffc107; color: black; padding: 3px 10px; border-radius: 5px; font-size: 12px; font-weight: bold; float: left; }
        .nav-bottom { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #eee; }
        .nav-item { text-align: center; color: #777; cursor: pointer; flex: 1; border: none; background: none; outline: none; }
        .nav-item.active { color: var(--main-purple); font-weight: bold; }
        .nav-item i { font-size: 22px; display: block; margin-bottom: 4px; }
        #report-section { display: none; padding: 20px; text-align: right; }
    </style>
</head>
<body>

<div class="header">
    <h3 style="margin:0; color: var(--main-purple);">ğŸ›¡ï¸ Ø«Ù‚Ø© ÙˆØ¯Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø§ÙŠ</h3>
    <small>Pi Network Ù„Ø®Ø¯Ù…Ø© Ù…Ø¬ØªÙ…Ø¹</small>
</div>

<div class="top-nav">
    <span><i class="fas fa-globe"></i> Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡ªğŸ‡¬</span>
    <span><i class="fas fa-map-marker-alt"></i> Ù…ØµØ±</span>
</div>

<div id="main-content">
    <div class="search-bar">
        <input type="text" id="searchInput" oninput="filterSearch()" placeholder="ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØªØ§Ø¬Ø± Ø£Ùˆ Ù…Ù†ØªØ¬...">
    </div>
    <h4 id="list-title" style="margin: 0 20px 10px 0;">Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ© (GCV)</h4>
    <div id="merchants-container"></div>
</div>

<div id="report-section">
    <div style="background: #fff3cd; padding: 15px; border-radius: 10px; color: #856404; margin-bottom: 20px;">
        <h4>âš ï¸ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø±ÙˆØ§Ø¯:</h4>
        <p>Ø¨Ù„Øº Ø¹Ù† Ø£ÙŠ ØªØ§Ø¬Ø± Ù„Ø§ ÙŠÙ„ØªØ²Ù… Ø¨Ø³Ø¹Ø± GCV Ø£Ùˆ ÙŠÙ‚Ø¯Ù… Ø¨Ø¶Ø§Ø¹Ø© Ø±Ø¯ÙŠØ¦Ø©.</p>
    </div>
    <button onclick="alert('Ø³ÙŠØªØµÙ„ Ø¨Ùƒ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù…')" style="width:100%; background:var(--main-purple); color:white; border:none; padding:15px; border-radius:10px; font-weight:bold;">Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù„Ø§Øº Ø±Ø³Ù…ÙŠ</button>
</div>

<div class="nav-bottom">
    <button id="btn-home" class="nav-item active" onclick="showTab('main', this)"><i class="fas fa-home"></i>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button id="btn-store" class="nav-item" onclick="showTab('main', this)"><i class="fas fa-store"></i>Ø§Ù„ØªØ¬Ø§Ø±</button>
    <button class="nav-item" onclick="window.location.href='staking-calc.html'"><i class="fas fa-calculator"></i>Ø§Ù„Ø­Ø§Ø³Ø¨Ø©</button>
    <button id="btn-report" class="nav-item" onclick="showTab('report', this)"><i class="fas fa-flag"></i>Ø§Ù„Ø¥Ø¨Ù„Ø§Øº</button>
</div>

<script>
    let allMerchants = [];

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù JSON
    async function loadMerchants() {
        try {
            const response = await fetch('merchants.json');
            allMerchants = await response.json();
            displayMerchants(allMerchants);
        } catch (error) {
            console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", error);
            document.getElementById('merchants-container').innerHTML = "<p style='text-align:center;'>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±...</p>";
        }
    }

    // Ø¹Ø±Ø¶ Ø§Ù„ØªØ¬Ø§Ø± ÙÙŠ Ø§Ù„ØµÙØ­Ø©
    function displayMerchants(data) {
        const container = document.getElementById('merchants-container');
        if (data.length === 0) {
            container.innerHTML = "<p style='text-align:center; padding:20px;'>Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬.</p>";
            return;
        }
        
        let html = '';
        data.forEach(m => {
            html += `
                <div class="merchant-card">
                    <img src="${m.image}" class="merchant-img" onerror="this.src='https://via.placeholder.com/400x200?text=Shop+Image'">
                    <div class="merchant-info">
                        <span class="badge">Ù…ÙˆØ«ÙˆÙ‚ GCV</span>
                        <h3 style="margin:0;">${m.name}</h3>
                        <p style="color:#666; margin:5px 0;">${m.category}</p>
                        <p style="color:#888; font-size:13px;"><i class="fas fa-map-marker-alt"></i> ${m.location}</p>
                        <div style="color: #ffc107;">â˜… â˜… â˜… â˜… â˜† (${m.rating})</div>
                        <button onclick="alert('Ø³ÙŠØªÙ… ÙØªØ­ ØªÙØ§ØµÙŠÙ„ ${m.name} Ù‚Ø±ÙŠØ¨Ø§Ù‹')" style="width:100%; margin-top:10px; background:var(--main-purple); color:white; border:none; padding:10px; border-radius:8px; cursor:pointer;">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
                    </div>
                </div>`;
        });
        container.innerHTML = html;
    }

    // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø­ÙŠ ÙˆØ§Ù„Ù…Ø¨Ø§Ø´Ø±
    function filterSearch() {
        const query = document.getElementById('searchInput').value.trim().toLowerCase();
        const filtered = allMerchants.filter(m => 
            m.name.toLowerCase().includes(query) || 
            m.category.toLowerCase().includes(query)
        );
        displayMerchants(filtered);
    }

    // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŒ Ø§Ù„ØªØ¬Ø§Ø±ØŒ Ø§Ù„Ø¥Ø¨Ù„Ø§Øº)
    function showTab(tab, btn) {
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        btn.classList.add('active');
        
        if(tab === 'report') {
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('report-section').style.display = 'block';
        } else {
            document.getElementById('main-content').style.display = 'block';
            document.getElementById('report-section').style.display = 'none';
            displayMerchants(allMerchants); // Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙƒØ§Ù…Ù„Ø©
        }
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    window.onload = loadMerchants;
</script>
</body>
    </html>
